{
  "swagger": "2.0",
  "info": {
    "title": "",
    "version": ""
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "api/v1/user/avatar": {
      "post": {
        "summary": "Update Avatar",
        "operationId": "UpdateAvatar",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UpdateAvatarResp"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateAvatarReq"
            }
          }
        ],
        "requestBody": {},
        "tags": [
          "user"
        ]
      }
    },
    "api/v1/user/detail": {
      "get": {
        "summary": "get user info",
        "operationId": "detail",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UserInfoResp"
            }
          }
        },
        "requestBody": {},
        "tags": [
          "user"
        ]
      }
    },
    "api/v1/user/followers": {
      "get": {
        "summary": "List the users that the authenticated user is following",
        "operationId": "ListMyFollowers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListMyFollowersResp"
            }
          }
        },
        "parameters": [
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/user/following": {
      "get": {
        "summary": "List the users that the authenticated user is following",
        "operationId": "ListMyFollowing",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListMyFollowingResp"
            }
          }
        },
        "parameters": [
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/user/following/{user_id}": {
      "get": {
        "summary": "Check whether a user is followed by the authenticated user",
        "operationId": "CheckMyFollowing",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CheckMyFollowingResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      },
      "delete": {
        "summary": "Unfollow a user",
        "operationId": "Unfollow",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UnFollowResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UnFollowReq"
            }
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      },
      "put": {
        "summary": "Follow a user",
        "operationId": "Follow",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/FollowResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/FollowReq"
            }
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/user/login": {
      "post": {
        "summary": "login",
        "operationId": "login",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/LoginResp"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/LoginReq"
            }
          }
        ],
        "requestBody": {},
        "tags": [
          "user"
        ]
      }
    },
    "api/v1/user/register": {
      "post": {
        "summary": "register",
        "operationId": "register",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/RegisterResp"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/RegisterReq"
            }
          }
        ],
        "requestBody": {},
        "tags": [
          "user"
        ]
      }
    },
    "api/v1/users/follow/{user_id}/count": {
      "get": {
        "summary": "Count the number of followers and following for the given user",
        "operationId": "CountFollowers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CountFollowResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/users/{doer_id}/following/{context_user_id}": {
      "get": {
        "summary": "CheckFollowing check if one user is following another user",
        "operationId": "CheckFollowing",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CheckFollowingResp"
            }
          }
        },
        "parameters": [
          {
            "name": "doer_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "context_user_id",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/users/{user_id}/followers": {
      "get": {
        "summary": "ListFollowers list the given user's followers",
        "operationId": "ListFollowers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListFollowersResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/users/{user_id}/following": {
      "get": {
        "summary": "ListFollowing list the users that the given user is following",
        "operationId": "ListFollowing",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListFollowingResp"
            }
          }
        },
        "parameters": [
          {
            "name": "user_id",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "required",
            "in": "query",
            "required": true,
            "type": "integer",
            "format": "int32"
          }
        ],
        "requestBody": {},
        "tags": [
          "follow"
        ]
      }
    },
    "api/v1/video/category": {
      "get": {
        "summary": "category",
        "operationId": "VideoCategory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CategoryResp"
            }
          }
        },
        "requestBody": {},
        "tags": [
          "video"
        ]
      }
    },
    "api/v1/video/feed": {
      "get": {
        "summary": "feed",
        "operationId": "VideoFeed",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/FeedResp"
            }
          }
        },
        "parameters": [
          {
            "name": "latestTime",
            "description": " 最新视频时间(毫秒时间戳)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "limit",
            "description": " 请求数量",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "token",
            "description": " 登录token",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "authorID",
            "description": " 作者ID",
            "in": "query",
            "required": false,
            "type": "invalid",
            "format": "UNKNOWN"
          },
          {
            "name": "tag",
            "description": " 标签",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "category_id",
            "description": " 分类",
            "in": "query",
            "required": false,
            "type": "invalid",
            "format": "UNKNOWN"
          }
        ],
        "requestBody": {},
        "tags": [
          "video"
        ]
      }
    }
  },
  "definitions": {
    "Category": {
      "type": "object",
      "properties": {
        "id": {
          "$ref": "#/definitions/uint",
          "description": " 分类ID"
        },
        "name": {
          "type": "string",
          "description": " 分类名称"
        }
      },
      "title": "Category",
      "required": [
        "id",
        "name"
      ]
    },
    "CategoryReq": {
      "type": "object",
      "title": "CategoryReq"
    },
    "CategoryResp": {
      "type": "object",
      "properties": {
        "category_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Category"
          }
        }
      },
      "title": "CategoryResp",
      "required": [
        "category_list"
      ]
    },
    "CheckFollowingReq": {
      "type": "object",
      "properties": {
        "doer_user_id": {
          "$ref": "#/definitions/uint"
        },
        "context_user_id": {
          "$ref": "#/definitions/uint"
        }
      },
      "title": "CheckFollowingReq",
      "required": [
        "doer_user_id",
        "用户id",
        "context_user_id"
      ]
    },
    "CheckFollowingResp": {
      "type": "object",
      "properties": {
        "status": {
          "type": "boolean",
          "format": "boolean"
        }
      },
      "title": "CheckFollowingResp",
      "required": [
        "status",
        "是否关注"
      ]
    },
    "CheckMyFollowingReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        }
      },
      "title": "CheckMyFollowingReq",
      "required": [
        "user_id",
        "关注用户id"
      ]
    },
    "CheckMyFollowingResp": {
      "type": "object",
      "properties": {
        "status": {
          "type": "boolean",
          "format": "boolean"
        }
      },
      "title": "CheckMyFollowingResp",
      "required": [
        "status",
        "是否关注"
      ]
    },
    "CountFollowReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        }
      },
      "title": "CountFollowReq",
      "required": [
        "user_id",
        "用户id"
      ]
    },
    "CountFollowResp": {
      "type": "object",
      "properties": {
        "following_count": {
          "type": "integer",
          "format": "int64"
        },
        "follower_count": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "CountFollowResp",
      "required": [
        "following_count",
        "关注数量",
        "follower_count",
        "粉丝数量"
      ]
    },
    "FeedReq": {
      "type": "object",
      "properties": {
        "latest_time": {
          "type": "integer",
          "format": "int64",
          "description": " 最新视频时间(毫秒时间戳)"
        },
        "limit": {
          "type": "integer",
          "format": "int32",
          "description": " 请求数量"
        },
        "token": {
          "type": "string",
          "description": " 登录token"
        },
        "author_id": {
          "$ref": "#/definitions/uint",
          "description": " 作者ID"
        },
        "tag": {
          "type": "string",
          "description": " 标签"
        },
        "category_id": {
          "$ref": "#/definitions/uint",
          "description": " 分类"
        }
      },
      "title": "FeedReq"
    },
    "FeedResp": {
      "type": "object",
      "properties": {
        "video_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Video"
          }
        },
        "next_time": {
          "type": "integer",
          "format": "int64",
          "description": " 下次请求时间(毫秒时间戳)"
        },
        "length": {
          "type": "integer",
          "format": "int32",
          "description": " 视频列表长度"
        }
      },
      "title": "FeedResp",
      "required": [
        "video_list",
        "next_time",
        "length"
      ]
    },
    "FollowReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        }
      },
      "title": "FollowReq",
      "required": [
        "user_id",
        "关注用户id"
      ]
    },
    "FollowResp": {
      "type": "object",
      "title": "FollowResp"
    },
    "FollowUser": {
      "type": "object",
      "properties": {
        "user_id": {
          "type": "string"
        },
        "user_name": {
          "type": "string"
        },
        "avatar": {
          "type": "string"
        }
      },
      "title": "FollowUser",
      "required": [
        "user_id",
        "用户id",
        "user_name",
        "用户名",
        "avatar",
        "头像"
      ]
    },
    "ListFollowersReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "ListFollowersReq",
      "required": [
        "user_id",
        "用户id",
        "page",
        "页码",
        "limit",
        "每页数量"
      ]
    },
    "ListFollowersResp": {
      "type": "object",
      "properties": {
        "followers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FollowUser"
          }
        }
      },
      "title": "ListFollowersResp",
      "required": [
        "followers",
        "用户id"
      ]
    },
    "ListFollowingReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        },
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "ListFollowingReq",
      "required": [
        "user_id",
        "用户id",
        "page",
        "页码",
        "limit",
        "每页数量"
      ]
    },
    "ListFollowingResp": {
      "type": "object",
      "properties": {
        "followers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FollowUser"
          }
        }
      },
      "title": "ListFollowingResp",
      "required": [
        "followers",
        "用户id"
      ]
    },
    "ListMyFollowersReq": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "ListMyFollowersReq",
      "required": [
        "page",
        "页码",
        "limit",
        "每页数量"
      ]
    },
    "ListMyFollowersResp": {
      "type": "object",
      "properties": {
        "followers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FollowUser"
          }
        }
      },
      "title": "ListMyFollowersResp",
      "required": [
        "followers",
        "用户id"
      ]
    },
    "ListMyFollowingReq": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer",
          "format": "int32"
        },
        "limit": {
          "type": "integer",
          "format": "int32"
        }
      },
      "title": "ListMyFollowingReq",
      "required": [
        "page",
        "页码",
        "limit",
        "每页数量"
      ]
    },
    "ListMyFollowingResp": {
      "type": "object",
      "properties": {
        "followers": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/FollowUser"
          }
        }
      },
      "title": "ListMyFollowingResp",
      "required": [
        "followers",
        "用户id"
      ]
    },
    "LoginReq": {
      "type": "object",
      "properties": {
        "phone": {
          "type": "string"
        },
        "password": {
          "type": "string"
        }
      },
      "title": "LoginReq",
      "required": [
        "phone",
        "password"
      ]
    },
    "LoginResp": {
      "type": "object",
      "properties": {
        "access_token": {
          "type": "string"
        },
        "access_expire": {
          "type": "integer",
          "format": "int64"
        },
        "refresh_after": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "LoginResp",
      "required": [
        "access_token",
        "access_expire",
        "refresh_after"
      ]
    },
    "RegisterReq": {
      "type": "object",
      "properties": {
        "phone": {
          "type": "string"
        },
        "password": {
          "type": "string"
        },
        "nick_name": {
          "type": "string"
        }
      },
      "title": "RegisterReq",
      "required": [
        "phone",
        "e164",
        "password",
        "nick_name"
      ]
    },
    "RegisterResp": {
      "type": "object",
      "properties": {
        "access_token": {
          "type": "string"
        },
        "access_expire": {
          "type": "integer",
          "format": "int64"
        },
        "refresh_after": {
          "type": "integer",
          "format": "int64"
        }
      },
      "title": "RegisterResp",
      "required": [
        "access_token",
        "access_expire",
        "refresh_after"
      ]
    },
    "UnFollowReq": {
      "type": "object",
      "properties": {
        "user_id": {
          "$ref": "#/definitions/uint"
        }
      },
      "title": "UnFollowReq",
      "required": [
        "user_id",
        "关注用户id"
      ]
    },
    "UnFollowResp": {
      "type": "object",
      "title": "UnFollowResp"
    },
    "UpdateAvatarReq": {
      "type": "object",
      "properties": {
        "image": {
          "type": "string"
        }
      },
      "title": "UpdateAvatarReq",
      "required": [
        "image",
        "Required"
      ]
    },
    "UpdateAvatarResp": {
      "type": "object",
      "title": "UpdateAvatarResp"
    },
    "User": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64"
        },
        "phone": {
          "type": "string"
        },
        "nick_name": {
          "type": "string"
        },
        "sex": {
          "type": "integer",
          "format": "int64"
        },
        "avatar_url": {
          "type": "string"
        },
        "info": {
          "type": "string"
        }
      },
      "title": "User",
      "required": [
        "id",
        "phone",
        "nick_name",
        "sex",
        "avatar_url",
        "info"
      ]
    },
    "UserInfoReq": {
      "type": "object",
      "title": "UserInfoReq"
    },
    "UserInfoResp": {
      "type": "object",
      "properties": {
        "user_info": {
          "$ref": "#/definitions/User"
        }
      },
      "title": "UserInfoResp",
      "required": [
        "user_info"
      ]
    },
    "Video": {
      "type": "object",
      "properties": {
        "id": {
          "type": "integer",
          "format": "int64",
          "description": " 视频ID"
        },
        "title": {
          "type": "string",
          "description": " 视频标题"
        },
        "playUrl": {
          "type": "string",
          "description": " 视频播放地址"
        },
        "thumbUrl": {
          "type": "string",
          "description": " 视频封面地址"
        },
        "favNum": {
          "type": "integer",
          "format": "int64",
          "description": " 点赞数"
        },
        "commentNum": {
          "type": "integer",
          "format": "int64",
          "description": " 评论数"
        },
        "shareNum": {
          "type": "integer",
          "format": "int64",
          "description": " 分享数"
        },
        "createdAt": {
          "type": "string",
          "description": " 视频创建时间(毫秒时间戳)"
        },
        "isFav": {
          "type": "boolean",
          "format": "boolean",
          "description": " 当前用户是否已点赞"
        },
        "isFollow": {
          "type": "boolean",
          "format": "boolean",
          "description": " 当前用户是否已关注该用户"
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": " 视频标签"
        },
        "author": {
          "$ref": "#/definitions/VideoUserInfo",
          "description": " 作者信息"
        }
      },
      "title": "Video",
      "required": [
        "id",
        "title",
        "playUrl",
        "thumbUrl",
        "favNum",
        "commentNum",
        "shareNum",
        "createdAt",
        "isFav",
        "isFollow",
        "tags",
        "author"
      ]
    },
    "VideoUserInfo": {
      "type": "object",
      "properties": {
        "nickName": {
          "type": "string",
          "description": " 昵称"
        },
        "avatarUrl": {
          "type": "string",
          "description": " 头像地址"
        }
      },
      "title": "VideoUserInfo",
      "required": [
        "nickName",
        "avatarUrl"
      ]
    }
  },
  "securityDefinitions": {
    "apiKey": {
      "type": "apiKey",
      "description": "Enter JWT Bearer token **_only_**",
      "name": "Authorization",
      "in": "header"
    }
  },
  "security": [
    {
      "apiKey": []
    }
  ]
}
